The code in this repository is associated with the manuscript “Label-free in vivo tracking of white matter degradation in the subcortical white matter using third harmonic generation microscopy in a mouse model of multiple sclerosis” by Nicole E. Chernavsky, Nuri Hong, Lianne J. Trigiani, Nozomi Nishimura, and Chris B. Schaffer, from the Meinig School of Biomedical Engineering at Cornell University.

The microglia 3D file is associated with Figure 4. It contains the x,y,z coordinates for all the microglia cell bodies and pathological bleb events found in a CX3CR-1GFP mouse at baseline, week 6, and week 12 into the experiment. The code calculates the Euclidean distance between each voxel and the nearest microglia centroid, as well as the Euclidean distance between each bleb and nearest microglia. It also accounts for edge effects.

The nodes file, including its supporting functions rotator and normalizer, standardizes the process for measuring the length of nodes of Ranvier, as presented in Figure 5 and 6. The script allows the user to scroll through a .tiff file, identify a node, rotate the image so that the node of interest is horizontal, and then draw a rectangle around the node. The line intensity profiles within the rectangle are then fit by a Gaussian function and the user is given an opportunity to verify/adjust the inflection points that are then used to calculate the width of the node.

The hyperAUCfull file was used for the hyperintensity analysis described in Figure 7. For each .tiff file representing an experimental timepoint, the function will threshold the pixels according to a user-input percentage. Multiple iterations are recommended to determine the optimal percent threshold for a given dataset. Pixels above the threshold are segmented into clusters, and the area of each cluster is calculated. The function plots the cluster areas for each .tiff file as a cumulative distribution function (CDF), pads the shorter CDFs in each dataset to match the length of the longest one, and calculates the integrals of the CDFs. The padding is to allow for direct comparision between the area-under-curve of different CDFs, which is the current basis for the metric. If a user wishes instead to set the upper/lower bounds of the integration, they may do so by using the hyperAUC file and adjusting x, which is currently set to 1:50.
